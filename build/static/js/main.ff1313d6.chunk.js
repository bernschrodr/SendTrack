(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,function(t,e,n){t.exports=n.p+"static/media/image-from-rawpixel-id-558785-jpeg.be7bc74e.jpg"},,,function(t,e,n){t.exports=n.p+"static/media/search-solid.f542b8a3.svg"},function(t,e,n){t.exports=n.p+"static/media/youtube-icon.98390dab.svg"},function(t,e,n){t.exports=n.p+"static/media/spotify-icon.e3366f54.svg"},function(t,e,n){t.exports=n.p+"static/media/youtube-music-icon.78295c28.svg"},function(t,e,n){t.exports=n.p+"static/media/deezer-icon.02166da7.svg"},function(t,e,n){t.exports=n(26)},,,,,,function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var r=n(0),i=n.n(r),a=n(9),o=n.n(a),s=(n(21),n(2)),l=n(3),u=n(6),c=n(4),p=n(1),f=n(5),d=(n(22),n(7)),h=n.n(d),v=(n(23),n(10)),g=n.n(v),b={youtubeMusic:"music.youtube",youtube:"youtube",spotify:"spotify",appleMusic:"music.apple",deezer:"deezer"},m={notValid:""},y=[];function k(t){var e,n=function(t){var e=-1,n="",r=t;-1!==r.indexOf("youtu.be/")&&(r="https://www.youtube.com/watch?v="+r.substring(r.indexOf("youtu.be/")+"youtu.be/".length,r.length));for(var i in b){var a=R(r,b[i]);if(-1!==a){e=a,n=b[i];break}}var o=r.substring(e);return o=function(t){var e=t.indexOf("/");return t.substring(e+1)}(o),y.push("Service Name: "+n+"\n"),console.log(y[y.length-1]),{service:n,cutUrl:o}}(t);if(n.service===b.youtube||n.service===b.youtubeMusic){var r,i,a=S(function(t){var e=t.cutUrl,n={};if(-1===e.indexOf("watch?"))return n.type="album",n;n.type="track",T(e);for(var r=T(e).split("&"),i=0;i<r.length;i++){var a=r[i].indexOf("="),o=r[i].substring(0,a),s=r[i].substring(a+1,r[i].length);n[o]=s}return y.push("Youtube arguments obj: ["+JSON.stringify(n)+"]\n"),console.log(y[y.length-1]),n}(n),"track");if("isAlbum"in a)return{notValid:"this is playlist. Now we cant work with them",artist:"",track:"this is playlist. Now we cant work with them",url:"",service:n.service};if("notValid"in a)return{notValid:a.notValid,artist:"",track:a.notValid,url:"",service:n.service};y.push("Youtube obj from input: ["+JSON.stringify(a)+"]\n"),console.log(y[y.length-1]);var o,s=a.items[0].snippet.title.indexOf("-");return-1!==a.items[0].snippet.title.indexOf("-")?(r=a.items[0].snippet.title.substring(0,s),i=a.items[0].snippet.title.substring(s,a.items[0].snippet.title.length)):(r=a.items[0].snippet.channelTitle,i=a.items[0].snippet.title),i=w(i),r=w(r),i=x(i),r=x(r),"youtube"===n.service?o="https://www.youtube.com/watch?v="+a.items[0].id:"youtubeMusic"===n.service&&(o="https://www.music.youtube.com/watch?v="+a.items[0].id),-1!==(s=(e=q(r,i,o,n.service)).artist.indexOf(" - Topic"))&&(e.artist=e.artist.substring(0,s)),y.push("Created youtube obj to compare: ["+JSON.stringify(e)+"]\n"),console.log(y[y.length-1]),e}if(n.service===b.spotify){var l=N(function(t){var e=t.cutUrl,n={},r=e.split("/");return n[r[0]]=r[1],y.push("Spotify arguments obj: ["+n.toString()+"]\n"),console.log(y[y.length-1]),n}(n),"track");if(y.push("Spotify obj from input: ["+JSON.stringify(l)+"]\n"),console.log(y[y.length-1]),"album"===l.type)return{artist:"",track:"this is album",url:"",notValid:"this is album"};if("notValid"in l)return{artist:"",track:"error:"+l.notValid,url:"",notValid:"error:"+l.notValid};var u=l.name,c=l.external_urls.spotify,p=l.artists[0].name;return u=w(u),p=w(p),u=x(u),e=q(p=x(p),u,c,n.service),y.push("Created spotify obj to compare: ["+JSON.stringify(e)+"]\n"),console.log(y[y.length-1]),e}if(n.service===b.deezer){var f=j(function(t){var e=t.cutUrl,n={},r=e.split("/");"artist"!==r[0]&&"track"!==r[0]||(n[r[0]]=r[1]);return y.push("Deezer arguments obj: ["+n.toString()+"]\n"),console.log(y[y.length-1]),n}(n),"track");if(y.push("Deezer obj from input: ["+JSON.stringify(f)+"]\n"),console.log(y[y.length-1]),"album"===f.type)return{artist:"",track:"this is album",url:"",notValid:"this is album"};if("notValid"in f)return{artist:"",track:"error:"+f.notValid,url:"",notValid:"error:"+f.notValid};var d=f.title_short,h=f.link,v=f.artist.name;return d=w(d),v=w(v),d=x(d),e=q(v=x(v),d,h,b.deezer),y.push("Created deezer obj to compare: ["+JSON.stringify(e)+"]\n"),console.log(y[y.length-1]),e}return{notValid:"Not Found:(",artist:"Not Found:(",track:"",url:""}}function O(t){var e;return-1!==t.indexOf(".")&&(e=t.indexOf("."),-1!==(e=t.indexOf("/",e)))}function w(t){var e,n=t;return-1!==t.indexOf("(")&&-1!==t.indexOf(")")&&(e=t.indexOf("("),n=t.substring(0,e)+t.substring(t.indexOf(")")+1,t.length)),-1!==t.indexOf("[")&&-1!==t.indexOf("]")&&(e=t.indexOf("["),n=t.substring(0,e)+t.substring(t.indexOf("]")+1,t.length)),n}function x(t){var e,n=t;return-1!==t.indexOf(/feat/i)&&(e=t.indexOf(/feat/i),n=t.substring(0,e)),n}function S(t,e){var n=t.type;delete t.type;var r=new XMLHttpRequest,i="https://www.googleapis.com/youtube/v3/",a=m;if("album"===n)return i+="playlistItems?",{isAlbum:""};switch(e){case"track":i+="videos?";break;case"search":i+="search?";break;default:return a.notValid="Not valid youtube request type",y.push("Not valid youtube request type\n"),console.log(y[y.length-1]),a}for(var o in i+="part=snippet",t)switch(o){case"v":i+="&id="+t[o];break;case"q":i+="&q="+t[o]+"&maxResults=25&type=video&videoCategoryId=10";break;case"list":case"feature":break;default:y.push("Bad youtube argument\n"),console.log(y[y.length-1])}return i+="&key=AIzaSyBEYdv5D-1VmQHgb5d3jR2qn2mo_mvlr9g",y.push("Request youtube url: "+i+"\n"),console.log(y[y.length-1]),r.open("GET",i,!1),r.send(),200!==r.status?(alert(r.status+": "+r.statusText),a.notValid=r.status+":"+r.statusText):0!==JSON.parse(r.responseText).pageInfo.totalResults?a=JSON.parse(r.responseText):a.notValid="Not Found",console.log(a),y.push("Requested youtube obj: ["+JSON.stringify(a)+"]\n"),console.log(y[y.length-1]),a}function N(t,e){var n=function(){var t=function(t){var e=document.cookie.match(new RegExp("(?:^|; )"+t.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return e?decodeURIComponent(e[1]):void 0}("spotifyKey");return t||function(){var t,e=new XMLHttpRequest;if(e.open("GET","/token",!1),e.send(),200!==e.status)alert(e.status+": "+e.statusText+"Can't get spotify token from sendtrack server");else{var n=JSON.parse(e.responseText);t=n.token,function(t,e,n){var r=(n=n||{}).expires;if("number"==typeof r&&r){var i=new Date;i.setTime(i.getTime()+1e3*r),r=n.expires=i}r&&r.toUTCString&&(n.expires=r.toUTCString());e=encodeURIComponent(e);var a=t+"="+e;for(var o in n){a+="; "+o;var s=n[o];!0!==s&&(a+="="+s)}document.cookie=a}("spotifyKey",n.token,{expires:(n.expires-Date.now())/1e3})}return t}()}(),r=m,i="https://api.spotify.com/v1/";if("artists"in t)return r.notValid="artist",r;switch(e){case"track":i+="tracks/"+t.track;break;case"search":i+="search?q="+t.q+"&type=track&limit=10";break;default:return m}y.push("Request spotify url: "+i+"\n"),console.log(y[y.length-1]);var a=new XMLHttpRequest;return a.open("GET",i,!1),a.setRequestHeader("Accept","application/json"),a.setRequestHeader("Content-Type","application/json"),a.setRequestHeader("Authorization","Bearer "+n),a.send(),200!==a.status?(alert(a.status+": "+a.statusText),r.notValid=a.status+":"+a.statusText):0!==JSON.parse(a.responseText).total&&(r=JSON.parse(a.responseText)),y.push("Requested spotify obj: "+a.responseText+"\n"),console.log(y[y.length-1]),r}function j(t,e){var n=m,r="/deezer/";switch(e){case"track":r+="track?id="+t.track;break;case"search":r+="search?artist="+t.artist+"&track="+t.track;break;default:return n.notValid="Bad Request Type",n}y.push("Request deezer url: "+r+"\n"),console.log(y[y.length-1]);var i=new XMLHttpRequest;return i.open("GET",r,!1),i.send(),200!==i.status?(alert(i.status+": "+i.statusText),n.notValid=i.statusText):0!==JSON.parse(i.responseText).total&&(n=JSON.parse(i.responseText)),y.push("Requested deezer obj: "+i.responseText+"\n"),console.log(y[y.length-1]),n}function T(t){var e=t.indexOf("watch?");return t.substring(e+"watch?".length)}function E(t){var e={spotify:"Not Found",youtube:"Not Found",youtubeMusic:"Not Found",deezer:"Not Found"};if(y.push("Initial Service: "+t.initialService),console.log(y[y.length-1]),t.hasOwnProperty("notValid"))return y.push("Not Valid: "+t.notValid+"\n"),console.log(y[y.length-1]),e;function n(t,e,n,r){return{artist:t,track:e,url:n,albumArt:r}}if(t.initialService!==b.spotify){var r={q:t.artist+" "+t.track};y.push("Spotify request: "+JSON.stringify(r)+"\n"),console.log(y[y.length-1]);var i=N(r,"search");if(y.push("Requested spotify obj: "+JSON.stringify(i)+"\n"),console.log(y[y.length-1]),!i.hasOwnProperty("type")&&"album"!==i.type&&!i.hasOwnProperty("notValid")){var a=function(t,e){var n=e.artist,r=e.track,i={notValid:"Not Found2"},a=!0,o=!1,s=void 0;try{for(var l,u=t.tracks.items[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var c=l.value,p=!1;if("track"===c.type){if(!V(r,c.name)&&!V(c.name,r))continue;var f=!0,d=!1,h=void 0;try{for(var v,g=c.artists[Symbol.iterator]();!(f=(v=g.next()).done);f=!0){var b=v.value;if(V(n,b.name)&&V(b.name,n)){p=!0;break}p=!1}}catch(m){d=!0,h=m}finally{try{f||null==g.return||g.return()}finally{if(d)throw h}}if(i=c,p)return i}}}catch(m){o=!0,s=m}finally{try{a||null==u.return||u.return()}finally{if(o)throw s}}return i}(i,t);if(!a.hasOwnProperty("notValid")){for(var o="",s=0;s<a.artists.length;s++)s!==a.artists.length-1?o+=a.artists[s].name+", ":o+=a.artists[s].name;e.spotify=n(o,a.name,a.external_urls.spotify,a.album.images[0].url)}}}if(t.initialService!==b.youtubeMusic||t.initialService!==b.youtube){var l={q:t.artist+" "+t.track};y.push("Youtube request: "+JSON.stringify(l)+"\n"),console.log(y[y.length-1]);var u=S(l,"search");if(!u.hasOwnProperty("notValid")){var c=function(t,e){var n=e.artist,r=e.track,i={notValid:"Not Found2"},a=!1,o=!0,s=!1,l=void 0;try{for(var u,c=t.items[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var p=u.value;if(-1!==p.snippet.channelTitle.indexOf("- Topic")){var f=p.snippet.channelTitle.substring(0,p.snippet.channelTitle.indexOf(" - Topic"));if(!V(r,p.snippet.title)&&!V(p.snippet.title,r))continue;if(!V(n,f)&&!V(f,n))continue;i=p,a=!0;break}}}catch(y){s=!0,l=y}finally{try{o||null==c.return||c.return()}finally{if(s)throw l}}if(!a){var d=!0,h=!1,v=void 0;try{for(var g,b=t.items[Symbol.iterator]();!(d=(g=b.next()).done);d=!0){var m=g.value;if(V(n+" "+r,m.snippet.title)||V(m.snippet.title,n+" "+r)){i=m;break}}}catch(y){h=!0,v=y}finally{try{d||null==b.return||b.return()}finally{if(h)throw v}}}return i}(u,t);if(!c.hasOwnProperty("notValid"))if(-1===c.snippet.channelTitle.indexOf("- Topic")){var p="",f=c.snippet.title,d=c.snippet.title,h=d.indexOf("-");-1!==d.indexOf("-")&&(p=d.substring(0,h).trim(),f=d.substring(h+1,d.length).trim()),t.initialService!==b.youtubeMusic&&(e.youtubeMusic=n(p,f,"https://music.youtube.com/watch?v="+c.id.videoId,c.snippet.thumbnails.high.url)),t.initialService!==b.youtube&&(e.youtube=n(p,f,"https://youtube.com/watch?v="+c.id.videoId,c.snippet.thumbnails.high.url))}else t.initialService!==b.youtubeMusic&&(e.youtubeMusic=n(c.snippet.channelTitle.substring(0,c.snippet.channelTitle.indexOf("- Topic")),c.snippet.title,"https://music.youtube.com/watch?v="+c.id.videoId,c.snippet.thumbnails.high.url)),t.initialService!==b.youtube&&(e.youtube=n(c.snippet.channelTitle.substring(0,c.snippet.channelTitle.indexOf("- Topic")),c.snippet.title,"https://youtube.com/watch?v="+c.id.videoId,c.snippet.thumbnails.high.url))}}if(t.initialService!==b.deezer){var v={artist:t.artist,track:t.track};y.push("Deezer request: "+JSON.stringify(v)+"\n"),console.log(y[y.length-1]);var g=j(v,"search");if(g.hasOwnProperty("notValid"))y.push("Deezer request not valid:["+g.notValid+"]\n"),console.log(y[y.length-1]);else{var m=function(t,e){var n=e.artist,r=e.track,i={notValid:"Not Found2"},a=!0,o=!1,s=void 0;try{for(var l,u=t.data[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var c=l.value;if("track"===c.type){if(!V(r,c.title)&&!V(c.title,r))continue;if(V(n,c.artist.name)&&V(c.artist.name,n)){i=c;break}}}}catch(p){o=!0,s=p}finally{try{a||null==u.return||u.return()}finally{if(o)throw s}}return i}(g,t);e.deezer=n(m.artist.name,m.title_short,m.link,m.album.cover_xl)}}return y.push("Array of Urls:["+JSON.stringify(e)+"]\n"),console.log(y[y.length-1]),e}function V(t,e){var n=new RegExp("[\\s-\\]\\[\\)\\(\\/\\.&]","i"),r=t.split(n),i=e.split(n);r=r.filter(function(t){return""!==t}),i=i.filter(function(t){return""!==t}),y.push("Splitted first string:["+r.toString()+"]\n"),console.log(y[y.length-1]),y.push("Splitted second string:["+i.toString()+"]\n"),console.log(y[y.length-1]);var a=!0,o=!1,s=void 0;try{for(var l,u=r[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var c=l.value,p=!1,f=!0,d=!1,h=void 0;try{for(var v,g=i[Symbol.iterator]();!(f=(v=g.next()).done);f=!0){var b=v.value,m=new RegExp(b,"i");if(-1!==c.search(m)){p=!0,console.log("Found");break}p=!1}}catch(k){d=!0,h=k}finally{try{f||null==g.return||g.return()}finally{if(d)throw h}}if(!p)return y.push("Not equal\n"),console.log(y[y.length-1]),!1}}catch(k){o=!0,s=k}finally{try{a||null==u.return||u.return()}finally{if(o)throw s}}return y.push("Equal\n"),console.log(y[y.length-1]),!0}function q(){return{artist:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",track:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",url:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",initialService:arguments.length>3&&void 0!==arguments[3]?arguments[3]:""}}function R(t,e){var n=t.indexOf(e);return-1!==n&&(n+=e.length),n}var U=function(t){function e(t){var n;return Object(s.a)(this,e),(n=Object(u.a)(this,Object(c.a)(e).call(this,t))).state={placeholder:"Enter: Url / artist - name",content:"",isUrl:!1},n.handleInputChange=n.handleInputChange.bind(Object(p.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(p.a)(n)),n}return Object(f.a)(e,t),Object(l.a)(e,[{key:"handleInputChange",value:function(t){var e=t.target.value;this.setState(function(){return{content:e,isUrl:O(e)}})}},{key:"handleSubmit",value:function(t){t.preventDefault();var e=this.state.content;this.state.isUrl||this.setState(function(){return{content:"",isUrl:!1}}),this.props.onSubmit(e,this.state.isUrl),this.setState(function(){return{content:"",isUrl:!1}}),console.log("submit")}},{key:"render",value:function(){return i.a.createElement("div",{className:"input-form container"},i.a.createElement("form",{className:"input-form__text-form"},i.a.createElement("input",{value:this.state.content,placeholder:this.state.placeholder,onChange:this.handleInputChange,onSubmit:this.handleSubmit}),i.a.createElement("button",{onClick:this.handleSubmit},i.a.createElement("img",{src:g.a,alt:""}))))}}]),e}(r.Component),C=(n(24),function(t){function e(){return Object(s.a)(this,e),Object(u.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(f.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){return i.a.createElement("div",{className:"link container"},i.a.createElement("a",{href:this.props.url,className:"link__element container",target:"_blank",rel:"noopener noreferrer"},i.a.createElement("img",{src:this.props.albumArt,className:"link__album-art",alt:""}),i.a.createElement("div",{className:"link__artist-track container"},i.a.createElement("div",{className:"link__track-name"},this.props.track),i.a.createElement("div",{className:"link__artist-name"},this.props.artist)),i.a.createElement("img",{src:this.props.service,className:"link__service-name",alt:""})))}}]),e}(r.Component)),_=(n(25),n(11)),J=n.n(_),I=n(12),z=n.n(I),A=n(13),M=n.n(A),F=n(14),L=n.n(F),P=function(t){function e(t){var n;return Object(s.a)(this,e),(n=Object(u.a)(this,Object(c.a)(e).call(this,t))).getInfo=n.getInfo.bind(Object(p.a)(n)),n.getLinks=n.getLinks.bind(Object(p.a)(n)),n}return Object(f.a)(e,t),Object(l.a)(e,[{key:"getInfo",value:function(){return i.a.createElement("div",{className:"links-block__input-object"},this.props.artist,i.a.createElement("br",null),this.props.track,i.a.createElement("br",null),this.props.url,i.a.createElement("br",null))}},{key:"getLinks",value:function(){var t,e=[];for(var n in this.props.arrayOfUrls)if("Not Found"!==this.props.arrayOfUrls[n]){var r=this.props.arrayOfUrls[n];switch(n){case"spotify":r.service=z.a;break;case"youtube":r.service=J.a;break;case"youtubeMusic":r.service=M.a;break;case"deezer":r.service=L.a}e.push((t=r,i.a.createElement(C,{service:t.service,artist:t.artist,track:t.track,url:t.url,albumArt:t.albumArt})))}return console.log(e),e}},{key:"render",value:function(){return i.a.createElement("div",{className:"links-block container"},i.a.createElement(this.getInfo,null),i.a.createElement(this.getLinks,null))}}]),e}(r.Component),D=function(t){function e(t){var n;return Object(s.a)(this,e),(n=Object(u.a)(this,Object(c.a)(e).call(this,t))).initialState={artist:"",track:"",url:"",background:h.a,arrayOfUrls:{spotify:"Not Found",youtube:"Not Found",youtubeMusic:"Not Found"}},n.state=n.initialState,n.getLink=n.getLink.bind(Object(p.a)(n)),n}return Object(f.a)(e,t),Object(l.a)(e,[{key:"getLink",value:function(t,e){var n,r=h.a,i=E(n=e?k(t):function(t){if(""===t)return{notValid:"empty string"};var e;-1!==t.indexOf("-")&&(e=t.split("-")),-1!==t.indexOf("\u2013")&&(e=t.split("\u2013")),y.push("Entered into text form: ["+e.toString()+"]\n"),console.log("Entered into text form:"+e);var n={notValid:"not valid input"};return(e=e.filter(function(t){return""!==t})).length>1&&(n=q(e[0].trim(),e[1].trim())),n}(t));"Not Found"!==i.spotify?r=i.spotify.albumArt:"Not Found"!==i.youtubeMusic&&(r=i.youtubeMusic.albumArt),this.setState(function(){return{artist:n.artist,track:n.track,url:n.url,arrayOfUrls:i,background:r}})}},{key:"render",value:function(){return i.a.createElement("div",{className:"App"},i.a.createElement("img",{className:"bg",src:this.state.background,alt:""}),i.a.createElement(U,{onSubmit:this.getLink}),i.a.createElement(P,{arrayOfUrls:this.state.arrayOfUrls,artist:this.state.artist,track:this.state.track,url:this.state.url}),i.a.createElement("div",{id:"result"}))}}]),e}(r.Component),H=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function W(t,e){navigator.serviceWorker.register(t).then(function(t){t.onupdatefound=function(){var n=t.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),e&&e.onUpdate&&e.onUpdate(t)):(console.log("Content is cached for offline use."),e&&e.onSuccess&&e.onSuccess(t)))})}}).catch(function(t){console.error("Error during service worker registration:",t)})}o.a.render(i.a.createElement(D,null),document.getElementById("root")),function(t){if("serviceWorker"in navigator){if(new URL("/SendTrack",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/SendTrack","/service-worker.js");H?(function(t,e){fetch(t).then(function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then(function(t){t.unregister().then(function(){window.location.reload()})}):W(t,e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e,t),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):W(e,t)})}}()}],[[15,1,2]]]);
//# sourceMappingURL=main.ff1313d6.chunk.js.map