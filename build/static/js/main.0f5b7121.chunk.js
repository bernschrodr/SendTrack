(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,function(t,e,n){t.exports=n(20)},,,,,,function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var r=n(0),i=n.n(r),a=n(8),o=n.n(a),s=(n(15),n(2)),l=n(3),u=n(6),c=n(4),p=n(1),f=n(5),d=(n(16),n(17),{youtubeMusic:"music.youtube",youtube:"youtube",spotify:"spotify",appleMusic:"music.apple"});function v(t){var e,n=function(t){var e=-1,n="";for(var r in d){var i=S(t,d[r]);if(-1!==i){e=i,n=d[r];break}}var a=t.substring(e);return a=function(t){var e=t.indexOf("/");return t.substring(e+1)}(a),console.log("Service Name: "+n),{service:n,cutUrl:a}}(t);if(n.service===d.youtube||n.service===d.youtubeMusic){var r,i,a=y(function(t){var e=t.cutUrl,n={};if(-1===e.indexOf("watch?"))return n.type="album",n;n.type="track",k(e);for(var r=k(e).split("&"),i=0;i<r.length;i++){var a=r[i].indexOf("="),o=r[i].substring(0,a),s=r[i].substring(a+1,r[i].length);n[o]=s}return console.log(n),n}(n),"track");if("isAlbum"in a)return{notValid:"this is playlist. Now we cant work with them",artist:"",track:"this is playlist. Now we cant work with them",url:"",service:n.service};if("notValid"in a)return{notValid:"Not found:(",artist:"",track:"Not found:(",url:"",service:n.service};console.log(a);var o,s=a.items[0].snippet.title.indexOf("-");return-1!==a.items[0].snippet.title.indexOf("-")?(r=a.items[0].snippet.title.substring(0,s),i=a.items[0].snippet.title.substring(s,a.items[0].snippet.title.length)):(r=a.items[0].snippet.channelTitle,i=a.items[0].snippet.title),i=m(i),r=m(r),i=b(i),r=b(r),"youtube"===n.service?o="https://www.youtube.com/watch?v="+a.items[0].id:"youtubeMusic"===n.service&&(o="https://www.music.youtube.com/watch?v="+a.items[0].id),e=x(r,i,o,n.service),console.log(e),-1!==(s=e.artist.indexOf(" - Topic"))&&(e.artist=e.artist.substring(0,s)),e}if(n.service===d.spotify){var l=g(function(t){var e=t.cutUrl,n={},r=e.split("/");return n[r[0]]=r[1],console.log(n),n}(n),"track");return console.log(l),"album"===l.type?{artist:"",track:"this is album",url:""}:"notValid"in l?{artist:"",track:"error:"+l.notValid,url:""}:(i=l.name,t=l.external_urls.spotify,r=l.artists[0].name,i=m(i),r=m(r),i=b(i),e=x(r=b(r),i,t,n.service))}return{notValid:"Not Found:(",artist:"Not Found:(",track:"",url:""}}function h(t){var e;return-1!==t.indexOf(".")&&(e=t.indexOf("."),-1!==(e=t.indexOf("/",e)))}function m(t){var e,n=t;return-1!==t.indexOf("(")&&-1!==t.indexOf(")")&&(e=t.indexOf("("),n=t.substring(0,e)+t.substring(t.indexOf(")")+1,t.length)),-1!==t.indexOf("[")&&-1!==t.indexOf("]")&&(e=t.indexOf("["),n=t.substring(0,e)+t.substring(t.indexOf("]")+1,t.length)),n}function b(t){var e,n=t;return-1!==t.indexOf(/feat/i)&&(e=t.indexOf(/feat/i),n=t.substring(0,e)),n}function y(t,e){var n=t.type;delete t.type;var r=new XMLHttpRequest,i="https://www.googleapis.com/youtube/v3/",a={notValid:""};if("album"===n)return i+="playlistItems?",{isAlbum:""};switch(e){case"track":i+="videos?";break;case"search":i+="search?";break;default:return console.log("not valid request type"),a}for(var o in i+="part=snippet",t)switch(o){case"v":i+="&id="+t[o];break;case"q":i+="&q="+t[o]+"&maxResults=25&type=video&videoCategoryId=10";break;case"list":case"feature":break;default:return console.log("bad argument = Not Found"),a}i+="&key=AIzaSyBEYdv5D-1VmQHgb5d3jR2qn2mo_mvlr9g",r.open("GET",i,!1),r.send();var s={notValid:""};return 200!==r.status?alert(r.status+": "+r.statusText):0!==JSON.parse(r.responseText).pageInfo.totalResults?s=JSON.parse(r.responseText):s.notValid="Not Found",console.log(s),s}function g(t,e){var n=function(){var t=function(t){var e=document.cookie.match(new RegExp("(?:^|; )"+t.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return e?decodeURIComponent(e[1]):void 0}("spotifyKey");return t||function(){var t,e=new XMLHttpRequest;if(e.open("GET","/token",!1),e.send(),200!==e.status)alert(e.status+": "+e.statusText+"Can't get spotify token from sendtrack server");else{var n=JSON.parse(e.responseText);t=n.token,T("spotifyKey",n.token,{expires:(n.expires-Date.now())/1e3})}return console.log(t),t}()}(),r={notValid:""},i=r,a="https://api.spotify.com/v1/";if("artists"in t)return i.notValid="artist",i;switch(e){case"track":a+="tracks/"+t.track;break;case"search":a+="search?q="+t.q+"&type=track&limit=10";break;default:return r}console.log(a);var o=new XMLHttpRequest;return o.open("GET",a,!1),o.setRequestHeader("Accept","application/json"),o.setRequestHeader("Content-Type","application/json"),o.setRequestHeader("Authorization","Bearer "+n),o.send(),200!==o.status?(alert(o.status+": "+o.statusText),i[r]=o.statusText):0!==JSON.parse(o.responseText).total&&(i=JSON.parse(o.responseText)),console.log(o.responseText),i}function k(t){var e=t.indexOf("watch?");return t.substring(e+"watch?".length)}function w(t){var e={spotify:"Not Found",youtube:"Not Found",youtubeMusic:"Not Found"};if(t.hasOwnProperty("notValid"))return console.log(t.notValid),e;function n(t,e,n,r){return{artist:t,track:e,url:n,albumArt:r}}if(t.initialService!==d.spotify){var r={q:t.artist+" "+t.track};console.log(t);var i=g(r,"search");if(console.log(i),!i.hasOwnProperty("type")&&"album"!==i.type&&!i.hasOwnProperty("notValid")){var a=function(t,e){var n=e.artist,r=e.track,i={notValid:"Not Found2"},a=!0,o=!1,s=void 0;try{for(var l,u=t.tracks.items[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var c=l.value,p=!1;if("track"===c.type){if(console.log(c.name),!O(r,c.name)&&!O(c.name,r))continue;var f=!0,d=!1,v=void 0;try{for(var h,m=c.artists[Symbol.iterator]();!(f=(h=m.next()).done);f=!0){var b=h.value;if(O(n,b.name)&&O(b.name,n)){p=!0;break}p=!1}}catch(y){d=!0,v=y}finally{try{f||null==m.return||m.return()}finally{if(d)throw v}}if(i=c,p)return i}}}catch(y){o=!0,s=y}finally{try{a||null==u.return||u.return()}finally{if(o)throw s}}return i}(i,t);if(!a.hasOwnProperty("notValid")){for(var o="",s=0;s<a.artists.length;s++)s!==a.artists.length-1?o+=a.artists[s].name+", ":o+=a.artists[s].name;e.spotify=n(o,a.name,a.external_urls.spotify,a.album.images[1].url)}}}if(t.initialService!==d.youtubeMusic||"youtube"!==t.initialService){var l={q:t.artist+" "+t.track};console.log(l.q),console.log("Initial Service: "+t.initialService);var u=y(l,"search");if(!u.hasOwnProperty("notValid")){var c=function(t,e){var n=e.artist,r=e.track,i={notValid:"Not Found2"},a=!1,o=!0,s=!1,l=void 0;try{for(var u,c=t.items[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var p=u.value;if(-1!==p.snippet.channelTitle.indexOf("- Topic")){var f=p.snippet.channelTitle.substring(0,p.snippet.channelTitle.indexOf(" - Topic"));if(!O(r,p.snippet.title)&&!O(p.snippet.title,r))continue;if(!O(n,f)&&!O(f,n))continue;i=p,a=!0;break}}}catch(g){s=!0,l=g}finally{try{o||null==c.return||c.return()}finally{if(s)throw l}}if(!a){var d=!0,v=!1,h=void 0;try{for(var m,b=t.items[Symbol.iterator]();!(d=(m=b.next()).done);d=!0){var y=m.value;if(O(n+" "+r,y.snippet.title)||O(y.snippet.title,n+" "+r)){i=y;break}}}catch(g){v=!0,h=g}finally{try{d||null==b.return||b.return()}finally{if(v)throw h}}}return i}(u,t);c.hasOwnProperty("notValid")||(-1===c.snippet.channelTitle.indexOf("- Topic")?(t.initialService!==d.youtubeMusic&&(e.youtubeMusic=n("",c.snippet.title,"https://music.youtube.com/watch?v="+c.id.videoId,c.snippet.thumbnails.medium.url)),t.initialService!==d.youtube&&(e.youtube=n("",c.snippet.title,"https://youtube.com/watch?v="+c.id.videoId,c.snippet.thumbnails.medium.url))):(t.initialService!==d.youtubeMusic&&(e.youtubeMusic=n(c.snippet.channelTitle.substring(0,c.snippet.channelTitle.indexOf("- Topic")),c.snippet.title,"https://music.youtube.com/watch?v="+c.id.videoId,c.snippet.thumbnails.medium.url)),t.initialService!==d.youtube&&(e.youtube=n(c.snippet.channelTitle.substring(0,c.snippet.channelTitle.indexOf("- Topic")),c.snippet.title,"https://youtube.com/watch?v="+c.id.videoId,c.snippet.thumbnails.medium.url))))}}return console.log(e),e}function O(t,e){var n=new RegExp("[\\s-\\]\\[\\)\\(\\/\\.&]","i"),r=t.split(n),i=e.split(n);r=r.filter(function(t){return""!==t}),i=i.filter(function(t){return""!==t}),console.log(r),console.log(i);var a=!0,o=!1,s=void 0;try{for(var l,u=r[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var c=l.value,p=!1,f=!0,d=!1,v=void 0;try{for(var h,m=i[Symbol.iterator]();!(f=(h=m.next()).done);f=!0){var b=h.value,y=new RegExp(b,"i");if(-1!==c.search(y)){p=!0,console.log("Found");break}p=!1}}catch(g){d=!0,v=g}finally{try{f||null==m.return||m.return()}finally{if(d)throw v}}if(!p)return console.log("not equal"),!1}}catch(g){o=!0,s=g}finally{try{a||null==u.return||u.return()}finally{if(o)throw s}}return console.log("equal"),!0}function x(){return{artist:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",track:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",url:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",initialService:arguments.length>3&&void 0!==arguments[3]?arguments[3]:""}}function S(t,e){var n=t.indexOf(e);return-1!==n&&(n+=e.length),n}function T(t,e,n){var r=(n=n||{}).expires;if("number"==typeof r&&r){var i=new Date;i.setTime(i.getTime()+1e3*r),r=n.expires=i}r&&r.toUTCString&&(n.expires=r.toUTCString());var a=t+"="+(e=encodeURIComponent(e));for(var o in n){a+="; "+o;var s=n[o];!0!==s&&(a+="="+s)}document.cookie=a}var E=function(t){function e(t){var n;return Object(s.a)(this,e),(n=Object(u.a)(this,Object(c.a)(e).call(this,t))).state={placeholder:"Enter: Url / artist - name",content:"",isUrl:!1},n.handleInputChange=n.handleInputChange.bind(Object(p.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(p.a)(n)),n}return Object(f.a)(e,t),Object(l.a)(e,[{key:"handleInputChange",value:function(t){var e=t.target.value;this.setState(function(){return{content:e,isUrl:h(e)}}),console.log("changed")}},{key:"handleSubmit",value:function(t){t.preventDefault();var e=this.state.content;this.state.isUrl||this.setState(function(){return{content:"",isUrl:!1}}),this.props.onSubmit(e,this.state.isUrl),this.setState(function(){return{content:"",isUrl:!1}}),console.log("submit")}},{key:"render",value:function(){return i.a.createElement("form",{id:"urlForm"},i.a.createElement("input",{id:"inputUrlForm",className:this.state.notUrlInput,value:this.state.content,placeholder:this.state.placeholder,onChange:this.handleInputChange,onSubmit:this.handleSubmit}),i.a.createElement("br",null),i.a.createElement("button",{onClick:this.handleSubmit,id:"submitBtn"},"Send"))}}]),e}(r.Component),N=(n(18),function(t){function e(){return Object(s.a)(this,e),Object(u.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(f.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){return i.a.createElement("div",{className:"link-to-track"},i.a.createElement("a",{href:this.props.url,target:"_blank"},i.a.createElement("div",{className:"service-name"},this.props.service),i.a.createElement("img",{src:this.props.albumArt}),i.a.createElement("div",{className:"artist-name"},this.props.artist),i.a.createElement("div",{className:"track-name"},this.props.track)))}}]),e}(r.Component)),j=(n(19),function(t){function e(t){var n;return Object(s.a)(this,e),(n=Object(u.a)(this,Object(c.a)(e).call(this,t))).getInfo=n.getInfo.bind(Object(p.a)(n)),n.getLinks=n.getLinks.bind(Object(p.a)(n)),n}return Object(f.a)(e,t),Object(l.a)(e,[{key:"getInfo",value:function(){return i.a.createElement("div",{className:"input-object"},this.props.artist,i.a.createElement("br",null),this.props.track,i.a.createElement("br",null),this.props.url,i.a.createElement("br",null))}},{key:"getLinks",value:function(){var t,e=[];for(var n in this.props.arrayOfUrls)if("Not Found"!==this.props.arrayOfUrls[n]){var r=this.props.arrayOfUrls[n];e.push((t=r,i.a.createElement(N,{service:n,artist:t.artist,track:t.track,url:t.url,albumArt:t.albumArt})))}return console.log(e),e}},{key:"render",value:function(){return i.a.createElement("div",{className:"LinksBlock"},i.a.createElement(this.getInfo,null),i.a.createElement(this.getLinks,null))}}]),e}(r.Component)),U=function(t){function e(t){var n;return Object(s.a)(this,e),(n=Object(u.a)(this,Object(c.a)(e).call(this,t))).initialState={artist:"",track:"",url:"",arrayOfUrls:{spotify:"Not Found",youtube:"Not Found",youtubeMusic:"Not Found"}},n.state=n.initialState,n.getLink=n.getLink.bind(Object(p.a)(n)),n}return Object(f.a)(e,t),Object(l.a)(e,[{key:"getLink",value:function(t,e){var n;n=e?v(t):function(t){var e;-1!==t.indexOf("-")&&(e=t.split("-")),-1!==t.indexOf("\u2013")&&(e=t.split("\u2013")),console.log(e);var n={notValid:"not valid input"};return(e=e.filter(function(t){return""!==t})).length>1&&(n=x(e[0].trim(),e[1].trim())),n}(t),this.setState(function(){return{artist:n.artist,track:n.track,url:n.url}});var r=w(n);this.setState(function(){return{arrayOfUrls:r}})}},{key:"render",value:function(){return i.a.createElement("div",{className:"App"},i.a.createElement(E,{onSubmit:this.getLink}),i.a.createElement(j,{arrayOfUrls:this.state.arrayOfUrls,artist:this.state.artist,track:this.state.track,url:this.state.url}),i.a.createElement("div",{id:"result"}))}}]),e}(r.Component),I=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function V(t,e){navigator.serviceWorker.register(t).then(function(t){t.onupdatefound=function(){var n=t.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),e&&e.onUpdate&&e.onUpdate(t)):(console.log("Content is cached for offline use."),e&&e.onSuccess&&e.onSuccess(t)))})}}).catch(function(t){console.error("Error during service worker registration:",t)})}o.a.render(i.a.createElement(U,null),document.getElementById("root")),function(t){if("serviceWorker"in navigator){if(new URL("/SendTrack",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/SendTrack","/service-worker.js");I?(function(t,e){fetch(t).then(function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then(function(t){t.unregister().then(function(){window.location.reload()})}):V(t,e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e,t),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):V(e,t)})}}()}],[[9,1,2]]]);
//# sourceMappingURL=main.0f5b7121.chunk.js.map